<!DOCTYPE html>
<html>
<head>
    <title>–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
    <h1>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h1>
    
    <div style="text-align: center; margin: 2rem 0;">
        <div id="imagePreview" style="width: 200px; height: 200px; margin: 0 auto; border-radius: 8px; overflow: hidden; border: 3px solid #007bff; background: #f0f2f5; display: flex; align-items: center; justify-content: center;">
            <span style="font-size: 3rem; color: #ccc;">üñºÔ∏è</span>
        </div>
        <label for="imageInput" style="display: inline-block; margin-top: 1rem; cursor: pointer; color: #007bff;">
            –í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        </label>
        <input type="file" id="imageInput" accept="image/*" style="display: none;">
    </div>
    
    <form id="createProductForm" action="/admin/create-product" method="POST">
        <input type="hidden" id="imageData" name="image" value="">
        
        <div>
            <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea id="description" name="description"></textarea>
        </div>
        <div>
            <label for="price">–¶–µ–Ω–∞:</label>
            <input type="number" id="price" name="price" step="0.01" required>
        </div>
        <div>
            <label for="stock">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –Ω–∞–ª–∏—á–∏–∏:</label>
            <input type="number" id="stock" name="stock" required>
        </div>
        <div>
            <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
            <input type="text" id="category" name="category">
        </div>
        <button type="submit">–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä</button>
    </form>
    <a href="/admin/products">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–æ–≤–∞—Ä–æ–≤</a>

    <script>
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const imageData = document.getElementById('imageData');

        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB');
                    return;
                }

                if (!file.type.startsWith('image/')) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(event) {
                    const base64String = event.target.result;
                    imagePreview.innerHTML = `<img src="${base64String}" alt="Product Image" style="width: 100%; height: 100%; object-fit: cover;">`;
                    imageData.value = base64String;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>